var ui={};(function(a){function b(){this.callbacks={}}a.Emitter=b,b.prototype.on=function(a,b){return(this.callbacks[a]=this.callbacks[a]||[]).push(b),this},b.prototype.once=function(a,b){function d(){c.off(a,d),b.apply(this,arguments)}var c=this;return this.on(a,d),this},b.prototype.off=function(a,b){var c=this.callbacks[a];if(!c)return this;if(1==arguments.length)return delete this.callbacks[a],this;var d=c.indexOf(b);return c.splice(d,1),this},b.prototype.emit=function(a){var b=[].slice.call(arguments,1),c=this.callbacks[a];if(c)for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b);return this}})(ui),function(a,b){function d(a){ui.Emitter.call(this),a=a||{},this.template=b,this.el=jQuery(this.template),this.render(a),c&&!c.hiding&&c.hide(),d.effect&&this.effect(d.effect),c=this}var c;a.Dialog=d,a.dialog=function(a,b){switch(arguments.length){case 2:return new d({title:a,message:b});case 1:return new d({message:a})}},d.prototype=new ui.Emitter,d.prototype.render=function(a){var b=this.el,c=a.title,d=a.message,e=this;b.find(".close").click(function(){return e.emit("close"),e.hide(),!1}),b.find("h1").text(c),c||b.find("h1").remove(),"string"==typeof d?b.find("p").text(d):d&&b.find("p").replaceWith(d.el||d),setTimeout(function(){b.removeClass("hide")},0)},d.prototype.closable=function(){return this.el.addClass("closable"),this},d.prototype.effect=function(a){return this._effect=a,this.el.addClass(a),this},d.prototype.modal=function(){return this._overlay=ui.overlay(),this},d.prototype.overlay=function(){var a=this;return this._overlay=ui.overlay({closable:!0}).on("hide",function(){a.closedOverlay=!0,a.hide()}),this},d.prototype.escapable=function(){var a=this;jQuery(document).bind("keydown.dialog",function(b){if(27!=b.which)return;jQuery(this).unbind("keydown.dialog"),a.hide()})},d.prototype.show=function(){var a=this._overlay;return this.emit("show"),a&&(a.show(),this.el.addClass("modal")),(!a||a.closable)&&this.escapable(),this.el.appendTo("body"),this.el.css({marginLeft:-(this.el.width()/2)+"px"}),this.emit("show"),this},d.prototype.hide=function(a){var b=this;return this.hiding=!0,a?(setTimeout(function(){b.hide()},a),this):(this.el.addClass("hide"),this._effect?setTimeout(function(a){a.remove()},500,this):b.remove(),this._overlay&&!b.closedOverlay&&this._overlay.hide(),this)},d.prototype.remove=function(){return this.emit("hide"),this.el.remove(),this}}(ui,'<div id="dialog" class="hide">\n  <div class="content">\n    <h1>Title</h1>\n    <a href="#" class="close">×</a>\n    <p>Message</p>\n  </div>\n</div>'),function(a,b){function c(a){ui.Emitter.call(this);var c=this;a=a||{},this.closable=a.closable,this.el=jQuery(b),this.el.appendTo("body"),this.closable&&this.el.click(function(){c.hide()})}a.Overlay=c,a.overlay=function(a){return new c(a)},c.prototype=new ui.Emitter,c.prototype.show=function(){return this.emit("show"),this.el.removeClass("hide"),this},c.prototype.hide=function(){var a=this;return this.emit("hide"),this.el.addClass("hide"),setTimeout(function(){a.el.remove()},2e3),this}}(ui,'<div id="overlay" class="hide"></div>'),function(a,b){function c(a){ui.Dialog.call(this,a)}a.Confirmation=c,a.confirm=function(a,b){switch(arguments.length){case 2:return new c({title:a,message:b});case 1:return new c({message:a})}},c.prototype=new ui.Dialog,c.prototype.cancel=function(a){return this.el.find(".cancel").text(a),this},c.prototype.ok=function(a){return this.el.find(".ok").text(a),this},c.prototype.show=function(a){return ui.Dialog.prototype.show.call(this),this.el.find(".ok").focus(),this.callback=a||function(){},this},c.prototype.render=function(a){ui.Dialog.prototype.render.call(this,a);var c=this,d=jQuery(b);this.el.addClass("confirmation"),this.el.append(d),this.on("close",function(){c.emit("cancel"),c.callback(!1)}),d.find(".cancel").click(function(a){a.preventDefault(),c.emit("cancel"),c.callback(!1),c.hide()}),d.find(".ok").click(function(a){a.preventDefault(),c.emit("ok"),c.callback(!0),c.hide()})}}(ui,'<div class="actions">\n  <button class="cancel">Cancel</button>\n  <button class="ok main">Ok</button>\n</div>'),function(a,b){function c(a,b,c){return"rgb("+a+", "+b+", "+c+")"}function d(a,b,c,d){return"rgba("+a+", "+b+", "+c+", "+d+")"}function e(a){var b=jQuery(a.target).offset();return{x:a.pageX-b.left,y:a.pageY-b.top}}function f(){ui.Emitter.call(this),this._colorPos={},this.el=jQuery(b),this.main=this.el.find(".main").get(0),this.spectrum=this.el.find(".spectrum").get(0),jQuery(this.main).bind("selectstart",function(a){a.preventDefault()}),jQuery(this.spectrum).bind("selectstart",function(a){a.preventDefault()}),this.hue(c(255,0,0)),this.spectrumEvents(),this.mainEvents(),this.w=180,this.h=180,this.render()}a.ColorPicker=f,f.prototype=new ui.Emitter,f.prototype.size=function(a){return this.width(a).height(a)},f.prototype.width=function(a){return this.w=a,this.render(),this},f.prototype.height=function(a){return this.h=a,this.render(),this},f.prototype.spectrumEvents=function(){function d(b){var c=e(b).y,d=a.hueAt(c-4);a.hue(d.toString()),a.emit("change",d),a._huePos=c,a.render()}var a=this,b=jQuery(this.spectrum),c;b.mousedown(function(a){a.preventDefault(),c=!0,d(a)}),b.mousemove(function(a){c&&d(a)}),b.mouseup(function(){c=!1})},f.prototype.mainEvents=function(){function d(b){var c;a._colorPos=e(b),c=a.colorAt(a._colorPos.x,a._colorPos.y),a.color(c.toString()),a.emit("change",c),a.render()}var a=this,b=jQuery(this.main),c;b.mousedown(function(a){c=!0,d(a)}),b.mousemove(function(a){c&&d(a)}),b.mouseup(function(){c=!1})},f.prototype.colorAt=function(a,b){var d=this.main.getContext("2d").getImageData(a,b,1,1).data;return{r:d[0],g:d[1],b:d[2],toString:function(){return c(this.r,this.g,this.b)}}},f.prototype.hueAt=function(a){var b=this.spectrum.getContext("2d").getImageData(0,a,1,1).data;return{r:b[0],g:b[1],b:b[2],toString:function(){return c(this.r,this.g,this.b)}}},f.prototype.color=function(a){return 0==arguments.length?this._color:(this._color=a,this)},f.prototype.hue=function(a){return 0==arguments.length?this._hue:(this._hue=a,this)},f.prototype.render=function(a){a=a||{},this.renderMain(a),this.renderSpectrum(a)},f.prototype.renderSpectrum=function(a){var b=this.el,e=this.spectrum,f=e.getContext("2d"),g=this._huePos,h=this.w*.12,i=this.h;e.width=h,e.height=i;var j=f.createLinearGradient(0,0,0,i);j.addColorStop(0,c(255,0,0)),j.addColorStop(.15,c(255,0,255)),j.addColorStop(.33,c(0,0,255)),j.addColorStop(.49,c(0,255,255)),j.addColorStop(.67,c(0,255,0)),j.addColorStop(.84,c(255,255,0)),j.addColorStop(1,c(255,0,0)),f.fillStyle=j,f.fillRect(0,0,h,i);if(!g)return;f.fillStyle=d(0,0,0,.3),f.fillRect(0,g,h,1),f.fillStyle=d(255,255,255,.3),f.fillRect(0,g+1,h,1)},f.prototype.renderMain=function(a){var b=this.el,e=this.main,f=e.getContext("2d"),g=this.w,h=this.h,i=(this._colorPos.x||g)+.5,j=(this._colorPos.y||0)+.5;e.width=g,e.height=h;var k=f.createLinearGradient(0,0,g,0);k.addColorStop(0,c(255,255,255)),k.addColorStop(1,this._hue),f.fillStyle=k,f.fillRect(0,0,g,h),k=f.createLinearGradient(0,0,0,h),k.addColorStop(0,d(255,255,255,0)),k.addColorStop(1,d(0,0,0,1)),f.fillStyle=k,f.fillRect(0,0,g,h);var l=10;f.save(),f.beginPath(),f.lineWidth=1,f.strokeStyle=d(0,0,0,.5),f.arc(i,j,l/2,0,Math.PI*2,!1),f.stroke(),f.strokeStyle=d(255,255,255,.5),f.arc(i,j,l/2-1,0,Math.PI*2,!1),f.stroke(),f.beginPath(),f.restore()}}(ui,'<div class="color-picker">\n  <canvas class="main"></canvas>\n  <canvas class="spectrum"></canvas>\n</div>'),function(a,b){function d(b){return function(c,d){return a.notify.apply(this,arguments).type(b)}}function e(a){ui.Emitter.call(this),a=a||{},this.template=b,this.el=jQuery(this.template),this.render(a),e.effect&&this.effect(e.effect)}var c;a.Notification=e,jQuery(function(){c=jQuery('<ul id="notifications">'),c.appendTo("body")}),a.notify=function(a,b){switch(arguments.length){case 2:return(new e({title:a,message:b})).show().hide(4e3);case 1:return(new e({message:a})).show().hide(4e3)}},a.info=a.notify,a.warn=d("warn"),a.error=d("error"),e.prototype=new ui.Emitter,e.prototype.render=function(a){var b=this.el,c=a.title,d=a.message,e=this;b.find(".close").click(function(){return e.hide(),!1}),b.click(function(a){a.preventDefault(),e.emit("click",a)}),b.find("h1").text(c),c||b.find("h1").remove(),"string"==typeof d?b.find("p").text(d):d&&b.find("p").replaceWith(d.el||d),setTimeout(function(){b.removeClass("hide")},0)},e.prototype.closable=function(){return this.el.addClass("closable"),this},e.prototype.effect=function(a){return this._effect=a,this.el.addClass(a),this},e.prototype.show=function(){return this.el.appendTo(c),this},e.prototype.type=function(a){return this._type=a,this.el.addClass(a),this},e.prototype.sticky=function(){return this.hide(0).closable()},e.prototype.hide=function(a){var b=this;return"number"==typeof a?(clearTimeout(this.timer),a?(this.timer=setTimeout(function(){b.hide()},a),this):this):(this.el.addClass("hide"),this._effect?setTimeout(function(a){a.remove()},500,this):b.remove(),this)},e.prototype.remove=function(){return this.el.remove(),this}}(ui,'<li class="notification hide">\n  <div class="content">\n    <h1>Title</h1>\n    <a href="#" class="close">×</a>\n    <p>Message</p>\n  </div>\n</li>'),function(a,b){function c(a){ui.Emitter.call(this),this.el=jQuery(b),this.events(),this.render({label:a}),this.state="hidden"}a.SplitButton=c,c.prototype=new ui.Emitter,c.prototype.events=function(){var a=this,b=this.el;b.find(".button").click(function(b){b.preventDefault(),a.emit("click",b)}),b.find(".toggle").click(function(b){b.preventDefault(),a.toggle()})},c.prototype.toggle=function(){return"hidden"==this.state?this.show():this.hide()},c.prototype.show=function(){return this.state="visible",this.emit("show"),this.el.addClass("show"),this},c.prototype.hide=function(){return this.state="hidden",this.emit("hide"),this.el.removeClass("show"),this},c.prototype.render=function(a){var a=a||{},b=this.el.find(".button"),c=a.label;return"string"==c?b.text(c):b.text("").append(c),this}}(ui,'<div class="split-button">\n  <a class="button" href="#">Action</a>\n  <a class="toggle" href="#"><span></span></a>\n</div>'),function(a,b){function c(){ui.Emitter.call(this),this.items={},this.el=jQuery(b).hide().appendTo("body"),this.el.hover(this.deselect.bind(this)),jQuery("html").click(this.hide.bind(this)),this.on("show",this.bindKeyboardEvents.bind(this)),this.on("hide",this.unbindKeyboardEvents.bind(this))}function d(a){return a.toLowerCase().replace(/ +/g,"-").replace(/[^a-z0-9-]/g,"")}a.Menu=c,a.menu=function(){return new c},c.prototype=new ui.Emitter,c.prototype.deselect=function(){this.el.find(".selected").removeClass("selected")},c.prototype.bindKeyboardEvents=function(){return jQuery(document).bind("keydown.menu",this.onkeydown.bind(this)),this},c.prototype.unbindKeyboardEvents=function(){return jQuery(document).unbind("keydown.menu"),this},c.prototype.onkeydown=function(a){switch(a.keyCode){case 38:a.preventDefault(),this.move("prev");break;case 40:a.preventDefault(),this.move("next")}},c.prototype.move=function(a){var b=this.el.find(".selected").eq(0),c=b.length?b[a]():this.el.find("li:first-child");c.length&&(b.removeClass("selected"),c.addClass("selected"),c.find("a").focus())},c.prototype.add=function(a,b){var c=this,e=jQuery('<li><a href="#">'+a+"</a></li>").addClass(d(a)).appendTo(this.el).click(function(d){d.preventDefault(),d.stopPropagation(),c.hide(),c.emit(a),b&&b()});return this.items[a]=e,this},c.prototype.remove=function(a){var b=this.items[a];if(!b)throw new Error('no menu item named "'+a+'"');return this.emit("remove",a),b.remove(),delete this.items[a],this},c.prototype.has=function(a){return!!this.items[a]},c.prototype.moveTo=function(a,b){return this.el.css({top:b,left:a}),this},c.prototype.show=function(){return this.emit("show"),this.el.show(),this},c.prototype.hide=function(){return this.emit("hide"),this.el.hide(),this}}(ui,'<div class="menu">\n</div>'),function(a,b){function c(a,c){ui.Emitter.call(this),this._front=a||jQuery("<p>front</p>"),this._back=c||jQuery("<p>back</p>"),this.template=b,this.render()}a.Card=c,a.card=function(a,b){return new c(a,b)},c.prototype=new ui.Emitter,c.prototype.front=function(a){return this._front=a,this.render(),this},c.prototype.back=function(a){return this._back=a,this.render(),this},c.prototype.flip=function(){return this.emit("flip"),this.el.toggleClass("flipped"),this},c.prototype.effect=function(a){return this.el.addClass(a),this},c.prototype.render=function(a){var b=this,c=this.el=jQuery(this.template);c.find(".front").empty().append(this._front.el||jQuery(this._front)),c.find(".back").empty().append(this._back.el||jQuery(this._back)),c.click(function(){b.flip()})}}(ui,'<div class="card">\n  <div class="wrapper">\n    <div class="face front">1</div>\n    <div class="face back">2</div>\n  </div>\n</div>');